<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>CubeWallet</title>
  </head>
  <body>

    <!--引用apicloud的脚本-->
    <script src="script/api.js"></script>

    <div id="app-box"></div>
    <!-- built files will be auto injected -->

    <script>
      //这里处理物理返回键，避免打包后点击一次直接退出应用
      window.apiready = function () {
        var timer = 0
        api.addEventListener({
          name: 'keyback'
        }, function (ret, err) {
          var currentTime = +new Date()
          api.historyBack(function (ret, err) {
            if (!ret.status) {
              if ((currentTime - timer) > 2000) {
                timer = currentTime
                api.toast({
                  msg: '再按一次返回键退出app',
                  duration: 2000,
                  location: 'bottom'
                })
              } else {
                api.closeWidget({
                  id: 'A6089289836112', //这里改成自己的应用ID
                  retData: {name: 'closeWidget'},
                  silent: true
                })
              }
            }
          })
        })
      }
    </script>
  </body>
</html>
